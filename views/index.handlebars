<div id="left" class="container">
    <h1>EAT AWAY!!</h1>
    <ul>
        {{#each good}}
        <li>
            <p>
                {{this.bg_name}}
                <button data-bgid="{{this.id}}" data-bgname="{{this.bg_name}}" class="eatbg">EAT BURGER!</button>
            </p>
        </li>
        {{/each}}
    </ul>
</div>
<div id="right" class="container">
    <h2>YOU EAT ALL OF THIS! 0_o</h2>
    <ul>
        {{#each eaten}}
        <li>
            <p>
                {{this.bg_name}}
            </p>
        </li>
        {{/each}}
    </ul>
</div>

<h2>MAKE A BURGER!</h2>
<form id="makebg" class="button-size">
    <textarea type="text" name="burger"></textarea>
    <button type="submit">Ready!</button>
</form>

<script type="text/javascript">

$(".eatbg").on("click", function(event) {
    event.preventDefault();
    const id = $(this).data("bgid");

    $.ajax("/api/burgers/" + id, {
        type: "PUT"
    }).then(function() {
        console.log("Ate burger id " + id);
        location.reload();
    });
});

$("#makebg").on("submit", function(event) {
    event.preventDefault();

    const newBurger = {
        burger: $("#makebg [name=burger]").val().trim()
    };

    $.ajax("/api/burgers", {
        type: "POST",
        data: newBurger
    }).then(function() {
        console.log("Made a new burger!");
        location.reload();
    });
});

</script>
